(function(a){a.fn.marquee=function(b){return this.each(function(){var y=a.extend({},a.fn.marquee.defaults,b),j=a(this),n,q,x,k,w,t=3,E="animation-play-state",c=false,F=function(i,o,K){var J=["webkit","moz","MS","o",""];for(var I=0;I<J.length;I++){if(!J[I]){o=o.toLowerCase()}i.addEventListener(J[I]+o,K,false)}},r=function(I){var i=[];for(var o in I){if(I.hasOwnProperty(o)){i.push(o+":"+I[o])}}i.push();return"{"+i.join(",")+"}"},C=function(){j.timer=setTimeout(f,y.delayBeforeStart)},D={pause:function(){if(c&&y.allowCss3Support){n.css(E,"paused")}else{if(a.fn.pause){n.pause()}}j.data("runningStatus","paused");j.trigger("paused")},resume:function(){if(c&&y.allowCss3Support){n.css(E,"running")}else{if(a.fn.resume){n.resume()}}j.data("runningStatus","resumed");j.trigger("resumed")},toggle:function(){D[j.data("runningStatus")=="resumed"?"pause":"resume"]()},destroy:function(){clearTimeout(j.timer);j.find("*").addBack().unbind();j.html(j.find(".js-marquee:first").html())}};if(typeof b==="string"){if(a.isFunction(D[b])){if(!n){n=j.find(".js-marquee-wrapper")}if(j.data("css3AnimationIsSupported")===true){c=true}D[b]()}return}var g={},z;a.each(y,function(i,o){z=j.attr("data-"+i);if(typeof z!=="undefined"){switch(z){case"true":z=true;break;case"false":z=false;break}y[i]=z}});if(y.speed){y.duration=parseInt(j.width(),10)/y.speed*1000}k=y.direction=="up"||y.direction=="down";y.gap=y.duplicated?parseInt(y.gap):0;j.wrapInner('<div class="js-marquee"></div>');var H=j.find(".js-marquee").css({"margin-right":y.gap,"float":"left"});if(y.duplicated){H.clone(true).appendTo(j)}j.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');n=j.find(".js-marquee-wrapper");if(k){var u=j.height();n.removeAttr("style");j.height(u);j.find(".js-marquee").css({"float":"none","margin-bottom":y.gap,"margin-right":0});if(y.duplicated){j.find(".js-marquee:last").css({"margin-bottom":0})}var s=j.find(".js-marquee:first").height()+y.gap;if(y.startVisible&&!y.duplicated){y._completeDuration=((parseInt(s,10)+parseInt(u,10))/parseInt(u,10))*y.duration;y.duration=(parseInt(s,10)/parseInt(u,10))*y.duration}else{y.duration=((parseInt(s,10)+parseInt(u,10))/parseInt(u,10))*y.duration}}else{w=j.find(".js-marquee:first").width()+y.gap;q=j.width();if(y.startVisible&&!y.duplicated){y._completeDuration=((parseInt(w,10)+parseInt(q,10))/parseInt(q,10))*y.duration;y.duration=(parseInt(w,10)/parseInt(q,10))*y.duration}else{y.duration=((parseInt(w,10)+parseInt(q,10))/parseInt(q,10))*y.duration}}if(y.duplicated){y.duration=y.duration/2}if(y.allowCss3Support){var h=document.body||document.createElement("div"),m="marqueeAnimation-"+Math.floor(Math.random()*10000000),p="Webkit Moz O ms Khtml".split(" "),e="animation",v="",d="";if(h.style.animation){d="@keyframes "+m+" ";c=true}if(c===false){for(var B=0;B<p.length;B++){if(h.style[p[B]+"AnimationName"]!==undefined){var A="-"+p[B].toLowerCase()+"-";e=A+e;E=A+E;d="@"+A+"keyframes "+m+" ";c=true;break}}}if(c){v=m+" "+y.duration/1000+"s "+y.delayBeforeStart/1000+"s infinite "+y.css3easing;j.data("css3AnimationIsSupported",true)}}var l=function(){n.css("transform","translateY("+(y.direction=="up"?u+"px":"-"+s+"px")+")")},G=function(){n.css("transform","translateX("+(y.direction=="left"?q+"px":"-"+w+"px")+")")};if(y.duplicated){if(k){if(y.startVisible){n.css("transform","translateY(0)")}else{n.css("transform","translateY("+(y.direction=="up"?u+"px":"-"+((s*2)-y.gap)+"px")+")")}}else{if(y.startVisible){n.css("transform","translateX(0)")}else{n.css("transform","translateX("+(y.direction=="left"?q+"px":"-"+((w*2)-y.gap)+"px")+")")}}if(!y.startVisible){t=1}}else{if(y.startVisible){t=2}else{if(k){l()}else{G()}}}var f=function(){if(y.duplicated){if(t===1){y._originalDuration=y.duration;if(k){y.duration=y.direction=="up"?y.duration+(u/((s)/y.duration)):y.duration*2}else{y.duration=y.direction=="left"?y.duration+(q/((w)/y.duration)):y.duration*2}if(v){v=m+" "+y.duration/1000+"s "+y.delayBeforeStart/1000+"s "+y.css3easing}t++}else{if(t===2){y.duration=y._originalDuration;if(v){m=m+"0";d=a.trim(d)+"0 ";v=m+" "+y.duration/1000+"s 0s infinite "+y.css3easing}t++}}}if(k){if(y.duplicated){if(t>2){n.css("transform","translateY("+(y.direction=="up"?0:"-"+s+"px")+")")}x={transform:"translateY("+(y.direction=="up"?"-"+s+"px":0)+")"}}else{if(y.startVisible){if(t===2){if(v){v=m+" "+y.duration/1000+"s "+y.delayBeforeStart/1000+"s "+y.css3easing}x={transform:"translateY("+(y.direction=="up"?"-"+s+"px":u+"px")+")"};t++}else{if(t===3){y.duration=y._completeDuration;if(v){m=m+"0";d=a.trim(d)+"0 ";v=m+" "+y.duration/1000+"s 0s infinite "+y.css3easing}l()}}}else{l();x={transform:"translateY("+(y.direction=="up"?"-"+(n.height())+"px":u+"px")+")"}}}}else{if(y.duplicated){if(t>2){n.css("transform","translateX("+(y.direction=="left"?0:"-"+w+"px")+")")}x={transform:"translateX("+(y.direction=="left"?"-"+w+"px":0)+")"}}else{if(y.startVisible){if(t===2){if(v){v=m+" "+y.duration/1000+"s "+y.delayBeforeStart/1000+"s "+y.css3easing}x={transform:"translateX("+(y.direction=="left"?"-"+w+"px":q+"px")+")"};t++}else{if(t===3){y.duration=y._completeDuration;if(v){m=m+"0";d=a.trim(d)+"0 ";v=m+" "+y.duration/1000+"s 0s infinite "+y.css3easing}G()}}}else{G();x={transform:"translateX("+(y.direction=="left"?"-"+w+"px":q+"px")+")"}}}}j.trigger("beforeStarting");if(c){n.css(e,v);var i=d+" { 100%  "+r(x)+"}",o=n.find("style");if(o.length!==0){o.filter(":last").html(i)}else{a("head").append("<style>"+i+"</style>")}F(n[0],"AnimationIteration",function(){j.trigger("finished")});F(n[0],"AnimationEnd",function(){f();j.trigger("finished")})}else{n.animate(x,y.duration,y.easing,function(){j.trigger("finished");if(y.pauseOnCycle){C()}else{f()}})}j.data("runningStatus","resumed")};j.bind("pause",D.pause);j.bind("resume",D.resume);if(y.pauseOnHover){j.bind("mouseenter",D.pause);j.bind("mouseleave",D.resume)}if(c&&y.allowCss3Support){f()}else{C()}})};a.fn.marquee.defaults={allowCss3Support:true,css3easing:"linear",easing:"linear",delayBeforeStart:1000,direction:"left",duplicated:false,duration:5000,gap:20,pauseOnCycle:false,pauseOnHover:false,startVisible:false}})(jQuery);